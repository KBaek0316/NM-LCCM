a
install.packages("dplyr")
library(dplyr)
a<-read.table("clipboard",sep="\t",header=TRUE)
View(a)
a$Date<-as.Date(a$Date)
View(a)
a<-read.table("clipboard",sep="\t",header=TRUE)
View(a)
a$Date<-as.Date(a$Date,format = "%m/%d/%y")
View(a)
a<-read.table("clipboard",sep="\t",header=TRUE)
a$Date<-as.Date(a$Date,format = "%m/%d/%Y")
View(a)
format(a$Date,"%m")
a$Mon<-format(a$Date,"%m")
weekdays(as.Date(a$date)
weekdays(a$Date)
a$Day1<-weekdays(a$Date)
library(dplyr)
a %>% group_by(Mon) %>% summarize(a=sum(Raw))
a %>% group_by(Day1) %>% summarize(a=sum(Raw))
cc<-a %>% group_by(Mon) %>% summarize(a=sum(Raw))
cc
cc[3:5,2]
sum(cc[3:5,2])
sum(cc[6:8,2])
sum(cc[9:11,2])
sum(cc[c(12,1,2),2])
cc[c(12,1,2),]
a$yr<-format(a$Date,"%Y")
a$Mon2<-as.integer(a$Mon)
a %>% filter(Date>'2018-06-30' & Date<'2023-08-01')%>%  group_by(Mon) %>% summarize(a=sum(Raw))
cc<-a %>% filter(Date>'2018-06-30' & Date<'2023-08-01')%>%  group_by(Mon) %>% summarize(a=sum(Raw))
sum(cc[3:5,2])
sum(cc[6:8,2])
sum(cc[9:11,2])
sum(cc[c(12,1,2),2])
show_col(viridis_pal()(20))
library(scales)
show_col(viridis_pal()(20))
show_col(viridis_pal()(5))
show_col(viridis(4))
library(ggplot2)
show_col(viridis(4))
library(viridis)
show_col(viridis(4))
aa<-read.table("clipboard",sep="\t",header=TRUE)
View(aa)
summary(as.factor(aa))/15568
summary(as.factor(aa$work_location))/15568
sum(summary(as.factor(aa))/15568)
sum(summary(as.factor(aa$work_location))/15568)
View(aa)
a<-read.table("clipboard")
a
unique(a)
library(ggplot2)
library(dplyr)
df1<-read.table("clipboard",sep="\t")
View(df1)
df1<-read.table("clipboard",sep="\t",header=TRUE)
View(df1)
ggplot(df1,aes(x=match,y=cost))+geom_boxplot()
ggplot(df1,aes(x=match,y=compProp))+geom_boxplot()
df1$match<-as.factor(df1$match)
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_boxplot()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()+ylab('Cost Difference Compared to the Shortest Path')
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()+ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()+ylab('Cost Difference (minutes)\nCompared to the Shortest Path')
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()+ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=match,y=compDiff,fill=match))+geom_violin()+ylab('Cost Difference (minutes)\nCompared to the Shortest Path')
df1$Matching<-ifelse(df1$match==1,"Matching","Alternative(s)")
ggplot(df1,aes(x=match,y=compProp,fill=match))+geom_violin()+ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compProp,fill=Matching))+geom_violin()+ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compDiff,fill=Matching))+geom_violin()+ylab('Cost Difference (minutes)\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compProp,fill=Matching))+geom_violin()+
geom_boxplot(width = .1, outlier.colour = NA)+stat_summary(fun.y = median, geom = "point", fill = "white", shape = 21, size = 2.5)
ggplot(df1,aes(x=Matching,y=compProp,fill=Matching))+geom_violin()+
geom_boxplot(width = .05,fill="black")+stat_summary(fun.y = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compProp,fill=Matching))+geom_violin()+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun.y = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compProp,fill=Matching))+geom_violin()+
geom_boxplot(width = .05, outlier.colour = NA)+stat_summary(fun.y = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')
ggplot(df1,aes(x=Matching,y=compProp))+geom_violin()+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun.y = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
library(dplyr) # but you have to load the packages for each R Session
library(tidyr)
library(mlogit)
library(ggplot2)
library(ggpattern)
selcols<-c("id","routes","match","tway","cost","iv","wt","aux","ov","nTrans","tt","PS",
"compProp","nwk","wk","ntiv","tiv")
dfpair<-read.csv("dfMNL_TRBAug.csv",header=TRUE)
dffree<-read.csv("dfMNL.csv",header=TRUE)
dfpair<-dfpair %>% select(selcols) %>% mutate(datfrom="Paired (TRB)")
dffree<-dffree %>% select(selcols) %>% mutate(datfrom="Freed (CASPT)")
df<-rbind(dfpair,dffree)
rm(dfpair,dffree,selcols)
df<-df %>% group_by(id,datfrom) %>% mutate(matchiv=iv[match==1],matchov=ov[match==1],matchtt=tt[match==1],siv=min(iv),sov=min(ov)) %>% ungroup
df<-df %>% mutate(ivdiffs=iv-siv,ovdiffs=ov-sov,IVTDiff=iv-matchiv,OVTDiff=ov-matchov,TTDiff=tt-matchtt)
View(df)
selcols<-c("id","routes","match","tway","cost","iv","wt","aux","ov","nTrans","tt","PS",
"compProp","nwk","wk","ntiv","tiv")
dfpair<-read.csv("dfMNL_TRBAug.csv",header=TRUE)
dffree<-read.csv("dfMNL.csv",header=TRUE)
rm(dfpair,dffree,selcols)
ggplot(df,aes(x=Matching,y=compProp))+geom_violin(scale='count')+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
df$Matching<-as.factor(ifelse(df$match==1,"Matching","Alternative(s)"))
ggplot(df,aes(x=Matching,y=compProp))+geom_violin(scale='count')+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
ggplot(df,aes(x=Matching,y=compProp))+geom_violin(trim=FALSE)+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
ggplot(df,aes(x=Matching,y=compProp))+geom_violin()+
geom_boxplot(width = .05, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
ggplot(df,aes(x=Matching,y=compProp))+geom_violin()+
geom_boxplot(width = .02, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
ggplot(df,aes(x=Matching,y=compProp))+geom_violin()+
geom_boxplot(width = .03, outlier.colour = NA,fill="black")+stat_summary(fun = median, geom = "point", fill = "white", shape = 21, size = 2.5)+
ylab('Cost Proportion\nCompared to the Shortest Path')+facet_grid(.~datfrom)
View(df)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
library(dplyr) # but you have to load the packages for each R Session
library(tidyr)
library(mlogit)
library(ggplot2)
library(ggpattern)
dfpair<-read.csv("dfMNL_TRBAug.csv",header=TRUE)
dffree<-read.csv("dfMNL.csv",header=TRUE)
selcols<-c("id","routes",'realDep',"match","tway","cost","iv","wt","aux","ov","nTrans","tt","PS",
"compProp","nwk","wk","ntiv","tiv")
dfpair<-read.csv("dfMNL_TRBAug.csv",header=TRUE)
dffree<-read.csv("dfMNL.csv",header=TRUE)
dfpair<-dfpair %>% select(selcols) %>% mutate(datfrom="Paired (TRB)")
dffree<-dffree %>% select(selcols) %>% mutate(datfrom="Freed (CASPT)")
View(dffree)
selcols<-c("id","routes",'realDep',"match","tway","cost","iv","wt","aux","nTrans","PS","tt","ov",
"compProp","nwk","wk","ntiv","tiv")
dfpair<-read.csv("dfMNL_TRBAug.csv",header=TRUE)
dffree<-read.csv("dfMNL.csv",header=TRUE)
View(dffree)
View(dffree)
dfpair<-dfpair %>% select(selcols) %>% mutate(datfrom="Paired (TRB)")
dffree<-dffree %>% select(selcols) %>% mutate(datfrom="Freed (CASPT)")
View(dffree)
selcols<-c("id","routes",'realDep',"match","tway","tt","iv","wt","aux","nTrans","PS","cost","ov",
"compProp","nwk","wk","ntiv","tiv")
dfpair<-dfpair %>% select(selcols) %>% mutate(datfrom="Paired (TRB)")
dffree<-dffree %>% select(selcols) %>% mutate(datfrom="Freed (CASPT)")
View(dffree)
